# Exporting from Virtuoso
* Go to the log window of virtuoso
* Click on `File` -> `Export` -> `CDL`
* PMOS Width double wrt NMOS due to mobility 
* ezwave Inverter.wdb
* tplh : time to propagate high to low
* tplh = tphl
* reduce the delay

# Revision

## Run Virtuoso
```
cd cmos65
source ./.cshrc_cmos065
virtuoso
```

## Create a new project
* From the log window, 'File' -> 'New' -> 'Library'
* Set the Library Name
* Under 'Technology File', select 'Attach to an existing technology library'
* Select 'cmos65' in the popup
* Apply -> ok and then close the window for new library
* Now, 'File' -> 'New' -> 'Cellview'
* Set the cellview name and proceed

## Creating the schematic
* Select 'Add Instance' or press 'I'
* Select library 'cmos065' and cell 'psvtlp' for PMOS
* Select 'symbol' under view and then close the popup
* Place the symbol and press escape to prevent placing another one
* Similarly, choose 'nsvtlp' for NMOS
* After placing all the components, press 'W' for placing wires
* Now add and place pins by pressing 'P'. Enter pin name and type of pin (input, output, inputOutput)
* Then do 'check and save' to verify the schematic

## Run Simulation using ADE L
* Launch -> ADE L
* Choose 'Analyses' -> 'Choose'
* Then select 'tran' for transient analysis and set stop time (eg: 100n for 100 nanoseconds)
* Select 'stimuli' and enable all the pins and set parameters
* Select 'model libraries' -> '...' -> '~/cmos65/corners/SS.scs'
* Do, 'Outputs' -> 'To Be Plotted' -> 'Select on Design' and then click on all the wires you want to see on the waveform
* Finally, click 'Netlist and run'
* In the waveform window, click on 'Split all strips'

## Exporting Netlist (CDL: Circuit Design Language)
* Go to Virtuoso Log window
* Click on 'File' -> 'Export' -> 'CDL'
* Select Library name of the current project
* Set output CDL netlist file to something ending in '.src.net' and set Run Directory appropriately

## Eldo Simulation
* Firstly replace the names of the Transistors from 'MM*' to 'XM*' to avoid conflicts in Eldo
* Now write the '.cir' file and run 'Eldo <.cir file>'
* To view waveform, run 'ezwave <.wdb file>'
* Note: the .wdb file is generated by Eldo


# Inverter.src.net
```
************************************************************************
* auCdl Netlist:
* 
* Library Name:  DVD_Test1
* Top Cell Name: Inverter
* View Name:     schematic
* Netlisted on:  Aug 28 13:57:03 2025
************************************************************************

*.BIPOLAR
*.RESI = 2000 
*.RESVAL
*.CAPVAL
*.DIOPERI
*.DIOAREA
*.EQUATION
*.SCALE METER
*.MEGA
.PARAM



************************************************************************
* Library Name: DVD_Test1
* Cell Name:    Inverter
* View Name:    schematic
************************************************************************

.SUBCKT Inverter gnd input out vcc
*.PININFO input:I vcc:I out:O gnd:B
XM0 out input vcc vcc psvtlp w=0.27 l=0.06 nfing=1 sense=0 ngcon=1 m=1 
+ accurateFlow=0
XM2 out input gnd gnd nsvtlp w=0.135 l=0.06 nfing=1 sense=0 ngcon=1 m=1 
+ accurateFlow=0
.ENDS
``` 

# Inverter.cir
```
.include /modelfile_65nm/minNminP.cir
.include Inverter.src.net
X1 gnd in out vdd Inverter
.param SUPPLY = 1.08
.param tend = 100n
.TEMP = 125
C out gnd 20f
vd vdd 0 SUPPLY
vg gnd 0 0
V1 in gnd pulse (0 1.08 0 0p 0p 5n 10n)
.probe v(*) v(x1.*)
.probe i(*)

.measure tran tplh
+ TRIG v(in) VAL='SUPPLY/2' FALL=1
+ TARG v(out) VAL='SUPPLY/2' RISE=1

.measure tran tphl
+ TRIG v(in) VAL='SUPPLY/2' RIS>? E=1
+ TARG v(out) VAL='SUPPLY/2' FALL=1

.measure tran tfall
+ TRIG v(out) VAL='0.8*SUPPLY' FALL=1
+ TARG v(out) VAL='0.2*SUPPLY' FALL=1

.measure tran trise
+ TRIG v(out) VAL='0.2*SUPPLY' RISE=1
+ TARG v(out) VAL='0.8*SUPPLY' RISE=1

.measure delay Param = ('tplh+tphl'/2)
.tran lp tend
.end
```
